<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>apkmodderkings</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    body,html{margin:0;height:100%;overflow:hidden;font-family:"Inter",sans-serif;background:#f2f3f5}
    #bgFull{position:fixed;inset:0;width:100%;height:100%;border:0;z-index:1}

    /* Floating button */
    .float{position:fixed;right:20px;bottom:20px;width:44px;height:44px;border-radius:50%;background:yellow;color:black;font-size:18px;cursor:pointer;box-shadow:0 6px 16px rgba(0,0,0,.25);display:flex;align-items:center;justify-content:center;z-index:2000;border:3px solid #000}
.float i{color:black;font-size:18px}

    /* Overlay bottom sheet */
    .overlay{position:fixed;inset:0;background:rgba(0,0,0,.35);display:none;align-items:flex-end;z-index:1500}
    .sheet{width:100%;max-width:440px;background:#ffffff;border-radius:20px 20px 0 0;
      transform:translateY(100%);opacity:0;transition:transform .3s ease,opacity .25s ease;
      box-shadow:0 -8px 24px rgba(0,0,0,.25);color:#222}
    .sheet.open{transform:translateY(0);opacity:1}

    /* Header */
    .hdr{display:flex;align-items:center;justify-content:space-between;padding:14px 16px;
      border-bottom:1px solid #e2e2e2;border-radius:20px 20px 0 0;background:#f8f9fa}
    .hdr .title{font-weight:700;font-size:15px;color:#111}
    .hdr .actions{display:flex;gap:10px}
    .join{background:#06b6d4;color:#fff;padding:6px 12px;border-radius:14px;font-size:13px;font-weight:600;text-decoration:none;display:flex;align-items:center;gap:6px}
    .btn-voice,.btn-close{width:30px;height:30px;border-radius:8px;display:flex;align-items:center;justify-content:center;font-size:14px;cursor:pointer;border:none}
    .btn-voice{background:#e8f7f9;color:#06b6d4}
    .btn-close{background:#f3f3f3;color:#555}

    .body{padding:14px;max-height:65vh;overflow-y:auto}
    .topline{display:flex;gap:8px;margin-bottom:12px}
    .uid,.online{flex:1;padding:8px;border-radius:10px;background:#f5f5f5;font-size:13px;font-weight:600;text-align:center;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
    .uid{color:#16a34a}
    .online{color:#d97706}

    .brand{text-align:center;margin-bottom:12px}
    .brand h2{margin:0;font-size:15px;color:#111}
    .brand p{margin:4px 0 0;font-size:12px;color:#666}
    .brand .made{color:#06b6d4;font-weight:600}

    .card{background:#fafafa;border:1px solid #ececec;border-radius:12px;padding:12px;margin-bottom:12px;text-align:center}
    .game-type{font-weight:700;color:#3b82f6;font-size:14px}
    .label{font-size:12px;color:#555;margin-top:6px}
    .period,.timer{font-size:13px;font-weight:600;color:#111}
    .timer{color:#06b6d4;margin-top:4px}
    .result-box{margin-top:8px;padding:8px;border-radius:8px;background:#f3f3f3;font-weight:700;font-size:14px;display:none}
    .result-box.big{color:#16a34a}
    .result-box.small{color:#dc2626}

    .switch-wrap{margin-top:12px}
    .switch{position:relative;display:inline-block;width:46px;height:24px}
    .switch input{opacity:0;width:0;height:0}
    .slider{position:absolute;inset:0;background:#ccc;border-radius:24px;transition:.3s}
    .slider:before{content:"";position:absolute;width:20px;height:20px;left:2px;bottom:2px;background:#fff;border-radius:50%;transition:.3s}
    .switch input:checked + .slider{background:#16a34a}
    .switch input:checked + .slider:before{transform:translateX(22px)}

    .footer{text-align:center;font-size:12px;font-weight:600;color:#06b6d4;margin-top:8px}
    .toast{position:fixed;bottom:80px;left:50%;transform:translateX(-50%);background:#333;color:#fff;padding:6px 12px;border-radius:12px;font-size:12px;opacity:0;transition:opacity .2s;z-index:2000}
    .toast.show{opacity:1}
  </style>
</head>
<body>
  <iframe id="bgFull" src="https://www.goagames.social/#/register?invitationCode=256761638686"></iframe>

  <div class="float" id="floatBtn"><i class="fa fa-star"></i></div>

  <div class="overlay" id="overlay">
    <div class="sheet" id="sheet">
      <div class="hdr">
        <div class="title">Prediction Panel</div>
        <div class="actions">
          <a class="join" href="https://telegram.me/apkmodderkings" target="_blank"><i class="fa-brands fa-telegram"></i>Join</a>
          <button class="btn-voice" id="voiceBtn"><i class="fa fa-volume-up"></i></button>
          <button class="btn-close" id="closeBtn"><i class="fa fa-xmark"></i></button>
        </div>
      </div>
      <div class="body">
        <div class="topline">
          <div class="uid" id="winnerText">UID 2463415 Win ₹5,064</div>
          <div class="online" id="onlineUsers"><i class="fa fa-users"></i> 190 Online</div>
        </div>
        <div class="brand">
          <h2>Goa Game</h2>
          <p><span class="made">made by ZebDex</span></p>
        </div>
        <div class="card">
          <div class="game-type">WINGO 1MIN</div>
        </div>
        <div class="card">
          <div class="label">Current Period (UTC)</div>
          <div class="period" id="periodNumber">—</div>
          <div class="timer" id="timerText">Next in 00:00</div>
          <div class="label">Result</div>
          <div id="resultBox" class="result-box">—</div>
          <div class="switch-wrap">
            <label class="switch"><input id="serverToggle" type="checkbox"><span class="slider"></span></label>
          </div>
        </div>
        <div class="footer">apkmodderkings</div>
      </div>
    </div>
  </div>

  <div class="toast" id="toast"></div>

  <script>
    const winnerText=document.getElementById("winnerText");
    const onlineUsers=document.getElementById("onlineUsers");
    const periodNumberEl=document.getElementById("periodNumber");
    const timerText=document.getElementById("timerText");
    const resultBox=document.getElementById("resultBox");
    const serverToggle=document.getElementById("serverToggle");
    const toast=document.getElementById("toast");
    let lastWinner=0,lastUsers=0,serverActive=false;

    function showToast(msg){toast.textContent=msg;toast.classList.add("show");setTimeout(()=>toast.classList.remove("show"),2000)}

    // Even winning numbers
    function randomEvenAmount(min,max){let amt=Math.floor(Math.random()*(max-min+1))+min;if(amt%2!==0)amt++;return amt;}

    function randomWinner(){
      const uid=Math.floor(1000000+Math.random()*9000000);
      let amt;const r=Math.random();
      if(r<0.7){amt=randomEvenAmount(500,6000)}
      else if(r<0.9){amt=randomEvenAmount(10,500)}
      else{amt=randomEvenAmount(6000,60000)}
      return`UID ${uid} Win ₹${amt.toLocaleString()}`
    }

    function updateWinner(t){
      if(!lastWinner||t-lastWinner>2500){lastWinner=t;winnerText.textContent=randomWinner()}
      requestAnimationFrame(updateWinner)
    }

    function updateUsers(t){
      if(!lastUsers||t-lastUsers>3000){lastUsers=t;const u=Math.floor(Math.random()*21)+180;onlineUsers.innerHTML=`<i class="fa fa-users"></i> ${u} Online`}
      requestAnimationFrame(updateUsers)
    }

    function updatePeriod(){
      if(!serverActive){resultBox.style.display="none";return}
      const now=new Date();
      const Y=now.getUTCFullYear();
      const M=String(now.getUTCMonth()+1).padStart(2,'0');
      const D=String(now.getUTCDate()).padStart(2,'0');
      const H=now.getUTCHours(),m=now.getUTCMinutes(),s=now.getUTCSeconds();
      const total=H*60+m;
      const period=`${Y}${M}${D}1000${10001+total}`;
      periodNumberEl.textContent=period;
      const lastTwo=period.slice(-2);
      let sum=lastTwo.split("").map(Number).reduce((a,b)=>a+b,0);
      if(sum>9)sum=String(sum).split("").map(Number).reduce((a,b)=>a+b,0);
      const kind=sum>=5?"BIG":"SMALL";
      const remain=60-s;
      timerText.textContent=`Next in 00:${String(remain%60).padStart(2,'0')}`;
      if(remain<=59&&remain>=55){resultBox.style.display="block";resultBox.textContent="PREDICTING..."}else{resultBox.style.display="block";resultBox.textContent=kind;resultBox.classList.remove("big","small");resultBox.classList.add(kind.toLowerCase())}
    }

    requestAnimationFrame(updateWinner);requestAnimationFrame(updateUsers);setInterval(updatePeriod,1000);

    serverToggle.addEventListener("change",()=>{
      serverActive=serverToggle.checked;
      if(navigator.vibrate)navigator.vibrate(200);
      if(serverActive){
        let m=new SpeechSynthesisUtterance("Server is now connected");
        m.lang="en-IN";speechSynthesis.speak(m);
        showToast("Server Connected")
      }else{
        let m=new SpeechSynthesisUtterance("Server disconnected");
        m.lang="en-IN";speechSynthesis.speak(m);
        showToast("Server Disconnected");resultBox.style.display="none"
      }
    });

    document.getElementById("voiceBtn").addEventListener("click",()=>{
      if(navigator.vibrate)navigator.vibrate(150);
      let m=new SpeechSynthesisUtterance("Join our Telegram channel. The name is Apkmodderkings");
      m.lang="en-IN";speechSynthesis.speak(m);
      showToast("Join Telegram Channel: Apkmodderkings")
    });

    // Floating button open/close
    const floatBtn=document.getElementById("floatBtn"),overlay=document.getElementById("overlay"),sheet=document.getElementById("sheet"),closeBtn=document.getElementById("closeBtn");
    floatBtn.addEventListener("click",()=>{overlay.style.display="flex";setTimeout(()=>sheet.classList.add("open"),20)});
    closeBtn.addEventListener("click",()=>{sheet.classList.remove("open");setTimeout(()=>overlay.style.display="none",250)});
    overlay.addEventListener("click",e=>{if(e.target===overlay){sheet.classList.remove("open");setTimeout(()=>overlay.style.display="none",250)}});

    // Draggable floating icon
    let isDragging=false,offsetX=0,offsetY=0;
    function startDrag(e){isDragging=true;offsetX=(e.touches?e.touches[0].clientX:e.clientX)-floatBtn.offsetLeft;offsetY=(e.touches?e.touches[0].clientY:e.clientY)-floatBtn.offsetTop}
    function drag(e){if(!isDragging)return;e.preventDefault();let x=(e.touches?e.touches[0].clientX:e.clientX)-offsetX;let y=(e.touches?e.touches[0].clientY:e.clientY)-offsetY;floatBtn.style.left=x+"px";floatBtn.style.top=y+"px";floatBtn.style.right="auto";floatBtn.style.bottom="auto"}
    function stopDrag(){isDragging=false}
    floatBtn.addEventListener("mousedown",startDrag);document.addEventListener("mousemove",drag);document.addEventListener("mouseup",stopDrag);
    floatBtn.addEventListener("touchstart",startDrag);document.addEventListener("touchmove",drag,{passive:false});document.addEventListener("touchend",stopDrag);
  </script>
</body>
</html>
